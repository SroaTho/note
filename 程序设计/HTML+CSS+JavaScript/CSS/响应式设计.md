# 响应式设计

**响应式 Web 设计不是单独的技术**，它是描述 Web 设计的一种方式、或者是一组最佳实践的一个词，它是用来建立可以**响应**查看内容的设备的样式的一个词。



## 媒介查询

媒介查询允许我们运行一系列测试，例如用户的屏幕是否大于某个宽度或者某个分辨率，并将 CSS 选择性地适应用户的需要应用在样式化页面上。



例如，下面的媒体查询进行测试，以知晓当前的 Web 页面是否被展示为屏幕媒体（也就是说不是印刷文档），且视口至少有 800 像素宽。

用于`.container`选择器的 CSS 将只会在这两件前提存在的情况下应用。

```css
@media screen and (min-width: 800px) {
  .container {
    margin: 1em 2em;
  }
}
```



可以在一张样式表上加入多条媒体查询，调整整个页面或者部分页面以达到适应各式屏幕尺寸的最佳效果。媒体查询，以及样式改变时的点，被叫做*断点*（breakpoints）。

使用媒体查询时的一种通用方式是，为窄屏设备（例如移动设备）创建一个简单的单栏布局，然后检查是否是大些的屏幕，在你知道你有足够容纳的屏幕宽度的时候，开始采用一种多栏的布局。这经常被描述为**移动优先**设计。



## 灵活网格

灵活浮动布局是这样实现的，让每个元素都有一个作为宽度的百分数，而且确保整个布局的和不会超过 100%。在他对于液态网格文章的原文中，Marcotte 详细描述了一种布局的法则，通过使用像素并把布局转化为百分数的方式设计。

target / context = result

例如如果我们的预期栏尺寸为 60 像素，而且它所在的上下文（或者容器）为 960 像素。用 960 去除 60，得到我们能够使用在我们的 CSS 上的值。

```css
.col {
	width: 6.25%; /* 60 / 960 = 0.0625 */
}
```



下面的例子阐释了一个使用媒体查询和灵活网格的简单响应式设计。在窄屏幕上，布局将盒子堆叠在另一个的上面：

源码：https://github.com/mdn/css-examples/blob/main/learn/rwd/float-based-rwd.html
演示：https://mdn.github.io/css-examples/learn/rwd/float-based-rwd.html

```CSS

/* 当屏幕足够大后 */
@media screen and (min-width: 600px) {
        .col1 {
          width: 31.24999999%;
          float: left;
        }

        .col2 {
          width: 64.58333331%;
          float: right;
        }
}
```



### 宽屏

![image-20240602202111714](./images/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1.assets/image-20240602202111714.png)

### 窄屏

![image-20240602202056736](./images/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1.assets/image-20240602202056736.png)



## 现代布局技术

现代布局方式，例如多栏布局、伸缩盒和网格默认是响应式的。它们都假设你在尽力创建一个可伸缩网格，而且给了你更容易这样做的方式。



### 多个列

留空



### 伸缩盒
在伸缩盒中，初始的行为是，弹性的物件将参照容器里面的空间的大小，缩小和分布物件之间的空间。通过更改flex-grow和 flex-shrink的值，你可以指示在物件遇到周围有更多或者更少的空间的情况下，你所期望的物件表现。

在下面的示例中，使用了flex: 1的简写，可伸缩物件每个将会占据一份可伸缩容器中相等大小的空间。

```css
.container {
  display: flex;
}

.item {
  flex: 1;
}
```



### CSS 网格

在 CSS 网格布局中，`fr`单位许可了跨网格轨道可用空间的分布。下面的示例创建了一个有着 3 个大小为`1fr`的轨道的网格容器。这会创建三个列轨道，每个占据了容器中可用空间的一部分。

```css
.container {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
}
```





### 响应式图像

最简单的处理响应式图像的方式是在 Marcotte 的早年的关于响应式设计的文章上所描述的那样。基本来说，你可以用一张有着所需最大尺寸的图像。然后缩放它。这仍然是今日所使用的一种方式，而且在大多数样式表里面，你在某些地方可以找到下面的 CSS：

```html
img {
  max-width: 100%;
}
```

这种方式有显然的弊端：

1. 图像有可能会显示得比它的原始尺寸小很多，以至于浪费带宽
2. 你可能不想在移动端和桌面端有相同的图像宽高比例。移动端，方形图像的表现会很好，但是桌面端显示同样的内容则应用宽图像。

3. 移动端更小尺寸的图像的你也许会希望同时展示一张不同的图像，一张在小一点的屏幕上更容易理解的图像。



响应式图像，使用了`<picture>`元素和`<img>` `srcset`和`sizes` 特性，解决了这两个问题。



## 响应式排版

在早期的设计中，我们没有充分考虑到字体大小应该随着屏幕大小的变化而变化这一重要点。字体应该自动调整到最适合阅读的大小。这种设计理念被称为"响应式排版"。



在本例子中，我们想讲我们的一级标题设置为`4rem`，也就是说它将会有我们的基础字体的四倍大。这真的是个很大的标题！我们只想在大些的屏幕上有这么个超大的标题，那我们先弄个小点的标题，再使用媒体查询，在我们知道用户使用至少`1200px`的屏幕的时候，拿大些的尺寸覆写它。

```css
html {
  font-size: 1em;
}

h1 {
  font-size: 2rem;
}

@media (min-width: 1200px) {
  h1 {
    font-size: 4rem;
  }
}
```



### 移动端

![A stacked layout with a small heading size.](./images/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1.assets/mdn-rwd-font-mobile.png)

### 桌面端

![A two column layout with a large heading.](./images/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1.assets/mdn-rwd-font-desktop.png)



### 使用视口单位实现响应式排版

一个有趣的方式是使用视口单位`vw`来实现响应式排版。`1vw`等同于视口宽度的百分之一，即如果你用`vw`来设定字体大小的话，字体的大小将总是随视口的大小进行改变。、

```css
h1 {
  font-size: 6vw;
}
```



因为文本总是随着视口的大小改变大小，用户失去了放缩任何使用`vw`单位的文本的能力。可以使用`calc()`，如果你将vw单位加到了使用固定大小（例如em或者rem）的值组，那么文本仍然是可放缩的。

```css
h1 {
  font-size: calc(1.5rem + 3vw);
}
```





## 视口元标签

视口元标签（Viewport Meta Tag）是用于控制网页在移动设备上的显示方式的一种重要技术。它告诉移动浏览器如何调整页面的尺寸和缩放，以适应不同屏幕大小和分辨率的设备。这个标签的基本格式如下：

```css
<meta name="viewport" content="width=device-width, initial-scale=1">
```

- `width=device-width`：这意味着视口的宽度应等于设备屏幕的宽度。在早期，移动浏览器可能会默认使用一个固定的宽度（如960像素），这导致了为桌面设计的网站在小屏幕上显示不正常。通过设置`width=device-width`，我们可以确保页面根据实际设备宽度进行缩放，从而实现更好的响应式设计。
- `initial-scale=1`：这表示页面应以100%的比例显示，即不进行任何缩放。这是为了确保页面内容能够正确地填充设备屏幕，而不至于过小或过大。



其他可选的属性包括：

- `height`：可以设定视口的高度，但在大多数情况下，这并不是必要的，因为现代浏览器会自动调整高度以适应内容。
- `minimum-scale` 和 `maximum-scale`：这些属性允许你限制用户可以缩放页面的范围。然而，限制缩放可能会影响网页的可用性和可访问性，特别是对于视力不佳的用户，他们可能需要更大的字体或更多的空间来阅读文本。
- `user-scalable`：默认情况下，用户可以手动缩放页面。将`user-scalable`设置为`no`可以禁用这一功能，但这通常不推荐，因为它剥夺了用户根据个人需求调整页面的能力。
