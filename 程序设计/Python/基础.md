# 基础

## 传入参数

`import sys`

读取命令行参数，把脚本名与其他参数转化为字符串列表存到 `sys` 模块的 `argv` 变量里。

该列表最少有一个元素；未给定输入参数时，sys.argv[0] 是空字符串。给定脚本名是 '-' （标准输入）时，sys.argv[0] 是 '-'。

使用 -c command 时，sys.argv[0] 是 '-c'。

如果使用选项 -m module，sys.argv[0] 就是包含目录的模块全名。、

解释器不处理 -c command 或 -m module 之后的选项，而是直接留在 sys.argv 中由命令或模块来处理。





## 编码

Python 源码文件的默认编码是 UTF-8，如果不使用默认编码，则要声明文件的编码。

```python
# -*- coding: encoding -*-
```

encoding 可以是 Python 支持的任意一种 codecs，例如：

```python
# -*- coding: cp1252 -*-
```



如果源码以 UNIX "shebang" 行 开头，编码声明要写在文件的第二行：

```python
#!/usr/bin/env python3
# -*- coding: cp1252 -*-
```



## 数学运算

表达式语法很直观：运算符 +, -, * 和 / 可被用来执行算术运算；圆括号 (()) 可被用来进行分组。

```python
>>> 2 + 2
4
>>> 50 - 5*6
20
```

整数（如，2、4、20 ）的类型是 int

带小数（如，5.0、1.6 ）的类型是 float



除法运算 (/) 总是返回浮点数。 

`//` 运算符返回整数的姐结果。

`%`运算符返回余数。

 `**` 运算符计算乘方。



## 变量

等号（`=`）用于给变量赋值。

```python
>>> width = 200
>>> height = 5 * 9
>>> width * height
900
```



如果变量未定义（即，未赋值），使用该变量会提示错误：

```python
>>> n  # try to access an undefined variable
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'n' is not defined
```



## 文本

用双引号`"`或单引号`'`包裹起来的字符，结果完全相同，称为字符串：

```python
>>> 'spam eggs'  # single quotes
'spam eggs'
>>> "Paris rabbit got your back :)! Yay!"  # double quotes
'Paris rabbit got your back :)! Yay!'
```



### 转义字符

要标示引号本身，我们需要对它进行“转义”，即在前面加一个 `\`，也可以使用不同类型的引号：

```python
>>> 'doesn\'t'  # use \' to escape the single quote...
"doesn't"
>>> "doesn't"  # ...or use double quotes instead
"doesn't"
```



字符串定义和`print()`函数输出字符串，并打印经过转义的特殊字符：

```python
>>> s = 'First line.\nSecond line.'  # \n means newline
>>> s  # without print(), special characters are included in the string
'First line.\nSecond line.'
>>> print(s)  # with print(), special characters are interpreted, so \n produces new line
First line.
Second line.
```



如果不希望前置 \ 的字符转义成特殊字符，可以使用**原始字符串**（不能以奇数个 `\` 字符结束），在引号前添加 r 即可：

```python
>>> print('C:\some\name')  # here \n means newline!
C:\some
ame
>>> print(r'C:\some\name')  # note the r before the quote
C:\some\name
```



三重引号：`"""..."""` 或 `'''...'''`，字符串中将自动包括行结束符，但也可以在换行的地方添加一个 `\` 来避免：

```python
print("""\
Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
""")
```

输出如下（请注意开始的换行符没有被包括在内）：

```
Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
```



## 字符串拼接

字符串可以用 `+` 合并（粘到一起），也可以用 `*` 重复：

```python
>>> # 3 times 'abc', followed by '123'
>>> 3 * 'abc' + '123'
'abcabcabc123'
```



相邻的两个或多个 **字符串字面值** （引号标注的字符）会自动合并：

```python
>>> 'Py' 'thon'
'Python'
```



拼接分隔开的长字符串时（只能用于两个字面值，不能用于变量或表达式：）：

```python
>>> text = ('Put several strings within parentheses '
        'to have them joined together.')

>>> text
'Put several strings within parentheses to have them joined together.'
```



合并多个变量，或合并变量与字面值，要用 +：

```python
>>> prefix + 'thon'
'Python'
```



## 字符串索引

```
 +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
 0   1   2   3   4   5   6
-6  -5  -4  -3  -2  -1
```

字符串支持 索引 （下标访问），第一个字符的索引是 0。

索引还支持负数，用负数索引时，从右边开始计数。

注意，-0 和 0 一样，因此，负数索引从 -1 开始。

```python
>>> str = "python"
>>> str[0]
'p'
>>> str[-0]
'p'
>>> str[1]
'y'
>>> str[-1]
'n'
```



## 字符串切片

切片允许你获取子字符串：

```python
>>> word[0:2]
'py'
>>> word[2:5]
'tho'
```

切片索引的默认值很有用；省略开始索引时，默认值为 0，省略结束索引时，默认为到字符串的结尾：

```python
>>> word[:2]
'py'
>>> word[4:]
'on'
>>> word[-2:]
'on'
```

注意，输出结果包含切片开始，但不包含切片结束。

因此，s[:i] + s[i:] 总是等于 s：

```python
>>> word[:2] + word[2:]
'Python'
>>> word[:4] + word[4:]
'Python'
```



索引越界会报错：

```python
>>> word[42]  # the word only has 6 characters
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: string index out of range
```



切片会自动处理越界索引：

```python
>>> word[4:42]
'on'
>>> word[42:]
''
```



Python 字符串不能修改，是 immutable 的。因此，为字符串中某个索引位置赋值会报错：

```python
>>> word[0] = 'J'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment
>>> word[2:] = 'py'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment
```



要生成不同的字符串，应新建一个字符串：

```python
>>> 'J' + word[1:]
'Jython'
>>> word[:2] + 'py'
'Pypy'
```



内置函数 len() 返回字符串的长度：

```python
>>> s = 'supercalifragilisticexpialidocious'
len(s)
34
```



## 列表

Python 支持多种 复合 数据类型，可将不同值组合在一起，列表也支持索引和切片，其内容可以改变。

最常用的 列表 ，是用方括号标注，逗号分隔的一组值，一般情况下，各个元素的类型相同：

```python
>>> squares = [1, 4, 9, 16, 25]
>>> squares
[1, 4, 9, 16, 25]
```



列表还支持合并操作：

```python
>>> squares + [36, 49, 64, 81, 100]
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
```



list.append() 方法，在列表末尾添加新条目：

```python
>>> cubes.append(216)  # add the cube of 6
>>> cubes.append(7 ** 3)  # and the cube of 7
>>> cubes
[1, 8, 27, 64, 125, 216, 343]
```



当你将一个列表赋值给一个变量时，该变量将引用 现有的列表

```python
>>> rgb = ["Red", "Green", "Blue"]
>>> rgba = rgb
>>> id(rgb) == id(rgba)  # they reference the same object
True
>>> rgba.append("Alph")
>>> rgb
["Red", "Green", "Blue", "Alph"]
```



内置函数 len() 也支持列表：

```python
>>> letters = ['a', 'b', 'c', 'd']
>>> len(letters)
4
```



### 嵌套列表

嵌套列表（创建包含其他列表的列表）：

```python
>>> a = [ [1,2,3] , [4,5,6,7] , ['a','b',c] ]
>>> a
[ [1,2,3] , [4,5,6,7] , ['a','b',c] ]

>>> a[1]
[1,2,3]

>>> a[2]
[4,5,6,7]
>>> a[2][0]
4

>>> a[3]
['a','b','c']
```



### 引用

当你将一个列表赋值给一个变量时，该变量将引用 现有的列表。

```python
>>> a = [1,2,3]
>>> b = a
>>> a
[1,2,3]
>>> b[2] = 4
>>> a
[1,2,4]
```



### 浅拷贝

创建一个新的复合对象，并将原始对象中找到的引用插入到新对象中。

```python
>>> a = [ [1,2,3] , [4,5,6]]
>>> b = a
>>> a
[ [1,2,3] , [4,5,6]]

>>> b[0] = [3,2,1]
>>> b
[ [3,2,1] , [4,5,6]]
>>> a
[ [1,2,3] , [4,5,6]]

>>> b[1] = [6,5,4]
>>> b
[ [3,2,1] , [6,5,4]]
>>> a
[ [1,2,3] , [6,5,4]]
```



### 深拷贝

创建一个新的复合对象，然后递归地将在原始对象中找到的对象的副本插入到新对象中。

```python
>>> a = [ [1,2,3] , [4,5,6]]
>>> b = copy.deepcopy(a) #深拷贝，对b进行任何操作都无法影响a
>>> a
[ [1,2,3] , [4,5,6]]

>>> b[0] = [3,2,1]
>>> b
[ [3,2,1] , [4,5,6]]
>>> a
[ [1,2,3] , [4,5,6]]

>>> b[1] = [6,5,4]
>>> b
[ [3,2,1] , [6,5,4]]
>>> a
[ [1,2,3] , [4,5,6]]
```



