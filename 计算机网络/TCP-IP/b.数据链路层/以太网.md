# 以太网 (IEEE 802.3) 帧格式：

> > 以太网 IEEE 802.3 的帧大小在 64 字节到 1518 字节之间变化，包括数据长度（46 到 1500 字节）。

​	![img](images/%E4%BB%A5%E5%A4%AA%E7%BD%91.assets/IEEE-802.3-Ethernet-Frame-Format.png)



## PREAMBLE

​		以太网帧以 7 字节前导码开始。这是一种 0 和 1 交替的模式，指示帧的开始并允许发送方和接收方建立位同步。最初，引入 PRE（前导码）是为了允许由于信号延迟而丢失一些比特。但当今的高速以太网不需要前导码来保护帧位。PRE（前导码）向接收器指示帧即将到来，并允许接收器在实际帧开始之前锁定数据流。



## 帧开始定界符 (SFD)

​		这是一个 1 字节字段，始终设置为 10101011。SFD 指示即将到来的位将开始帧，即目标地址。有时SFD被认为是PRE的一部分，这就是前导码在许多地方被描述为8字节的原因。SFD 警告一个或多个站点，这是最后的同步机会。



## 目标地址

​		这是一个 6 字节字段，包含数据目的地机器的 MAC 地址。

## 源地址

​		这是一个 6 字节字段，包含源计算机的 MAC 地址。由于源地址始终是单个地址（单播），因此第一个字节的最低有效位始终为 0。



## 长度

​		长度是一个 2 字节字段，指示整个以太网帧的长度。这个16位字段可以容纳0到65534之间的长度值，但由于以太网自身的一些限制，长度不能大于1500字节。



## 数据

​		这是插入实际数据的地方，也称为有效负载。如果通过以太网使用互联网协议，IP 标头和数据都将插入此处。存在的最大数据可能长达 1500 字节。如果数据长度小于最小长度，即 46 字节，则添加填充 0 以满足最小可能长度。



## 循环冗余校验 (CRC)

​		CRC 是 4 字节字段。该字段包含数据的 32 位哈希码，该哈希码是通过目标地址、源地址、长度和数据字段生成的。如果目的地计算的校验和与发送的校验和值不同，则接收到的数据被损坏。



# 以太网 (IEEE 802.3) 帧扩展

## VLAN 标记

​		以太网帧还可以包含 VLAN（虚拟局域网）标记，它是插入在源地址之后、EtherType 字段之前的 4 字节字段。该标签允许网络管理员在逻辑上将物理网络划分为多个虚拟网络，每个虚拟网络都有自己的 VLAN ID。



## 巨型帧

​		除了 1518 字节的标准以太网帧大小之外，某些网络设备还支持巨型帧，即有效负载大于 1500 字节的帧。巨型帧可以通过减少与传输大量小帧相关的开销来提高网络吞吐量。



## 以太网类型字段

​		以太网帧头中的以太网类型字段标识帧有效负载中携带的协议。例如，值为0x0800表示负载为IP报文，值为0x0806表示负载为ARP（地址解析协议）报文。



## 组播和广播帧

​		除了单播帧（发送到特定目标 MAC 地址）之外，以太网还支持组播和广播帧。组播帧被发送到已加入组播组的特定设备组，而广播帧被发送到网络上的所有设备。



## 冲突检测

​		在半双工以太网中，当两个设备尝试同时传输数据时，可能会发生冲突。为了检测冲突，以太网使用带有冲突检测功能的载波侦听多路访问 (CSMA/CD) 协议，该协议在传输数据之前侦听网络上的活动，并在检测到冲突时退出。



# 扩展以太网帧（Ethernet II Frame）：

![image-20231219150211295](images/%E4%BB%A5%E5%A4%AA%E7%BD%91.assets/image-20231219150211295.png)





# MAC地址格式

​		MAC地址是一个12位的十六进制数（6位二进制数），主要用冒号十六进制表示法表示

​		MAC 地址的前 6 位数字（例如 00:40:96）标识制造商，称为 OUI（组织唯一标识符）。IEEE 注册机构委员会将这些 MAC 前缀分配给其注册供应商。 

```
CC:46:D6 - 思科
3C:5A:B4 - 谷歌公司
3C:D9:2B - 惠普
00:9A:CD - 华为技术有限公司
```

​		如上所述，MAC 地址由冒号十六进制表示法表示。但这只是一种转换，并不是强制的。MAC 地址可以使用以下任意格式表示：

![MAC地址格式](images/%E4%BB%A5%E5%A4%AA%E7%BD%91.assets/mac-notation.jpg)



