

# 基于以太网IP的路由转发

![image-20231224131246801](images/%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91.assets/image-20231224131246801.png)

PC1发送IP数据包给PC2

1. PC1在IP包中封装，源地址172.18.100.100，目的地址：172.20.100.100
2. 由于PC1和PC2不在同一网段，PC1需要将IP包发送给R1，R1再将IP包发送给R2。
3. PC1通过ARP请求R1（172.18.0.1）的MAC地址。
4. PC1封装以太网帧，源MAC地址：00:00:00:AA:BB:A0（PC1），目的MAC地址：00:00:00:AA:BB:A1（R1MAC地址），然后发送
5. R1收到PC1发送过来的，然后ARP请求，PC2的MAC地址。
6. R1封装以太网帧，源MAC地址：00:00:00:AA:BB:C1（R1 MAC地址），目的MAC地址：00:00:00:AA:BB:C0（PC2 MAC地址），然后发送
7. 最后PC2收到数据包